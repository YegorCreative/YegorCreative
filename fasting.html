<!DOCTYPE html>
<html lang="en">

<head>
    <title>Fasting | Yegor Creative</title>
    <meta charset="UTF-8">
    <meta name="description" content="A 40-day prayer and fasting guide with Scripture, the story of Jesus‚Äô wilderness fast, and practical daily rhythms for spiritual focus.">
    <meta name="keywords" content="HTML, CSS, JavaScript">
    <meta name="keywords" content="Yegor Creative">
    <meta name="descript" content="YegorCreative">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="CSS/styles.css">
    <link rel="stylesheet" href="CSS/responsive.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Righteous&family=Roboto:wght@300&display=swap" rel="stylesheet">
    <meta property="og:image" content="Assets/YegorCreativeScan.png">
    <meta property="og:image:type" content="image/jpeg">
    <meta property="og:image:width" content="400">
    <meta property="og:image:height" content="300">
    <link rel="icon" type="image/png" href="./Assets/lionheadico.png">
</head>

<body class="fasting-page">
    <!-- Skip link for keyboard navigation -->
    <a href="#main" class="skip-link">Skip to main content</a>
    
    <!-- Top anchor for back-to-top functionality -->
    <div id="top" aria-hidden="true"></div>

    <header role="banner" class="mainHeading">
        <div class="mainLogo">
            <a href="index.html"><img src="Assets/lionhead.png" alt="Yegor Creative lion logo" height="110px"></a>
            <h1>YegorCreative</h1>
        </div>
        <button type="button"
                class="nav-toggle"
                id="navToggle"
                aria-controls="primaryNav"
                aria-expanded="false"
                aria-label="Open menu">
          <span class="nav-toggle-bar"></span>
          <span class="nav-toggle-bar"></span>
          <span class="nav-toggle-bar"></span>
        </button>
        <nav id="primaryNav" class="site-nav primary-nav" aria-label="Primary">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="index.html#creative">Creative</a></li>
                <li><a href="fasting.html">Fasting</a></li>
                <li><a href="badges.html">Badges</a></li>
                <li><a href="index.html#about">About</a></li>
                <li><a href="index.html#contact">Contact</a></li>
            </ul>
        </nav>
        <div class="goodWebsite">
            <h1 class="head1">40 Days Forward</h1>
            <p class="head1" aria-hidden="true">Presence over comfort</p>
            <p class="head2">A guided path of prayer, fasting, and focus.</p>
        </div>
    </header>

    <main id="main" role="main">
        <section class="fasting-section fasting-hero" id="fasting-hero">
            <h1>40 Days of Prayer &amp; Fasting</h1>
            <p>A sacred journey of surrender, discipline, and transformation.</p>
            <div class="scripture-block">
                <p>‚ÄúMan shall not live by bread alone, but by every word that comes from the mouth of God.‚Äù</p>
                <span class="scripture-ref">Matthew 4:4</span>
            </div>
            <div class="fasting-cta-row">
                <a class="fasting-button" href="#fasting-plan">Begin the Journey</a>
                <a class="fasting-button secondary" href="#fasting-types">Choose a Fast</a>
            </div>
        </section>

        <section class="fasting-section" id="fasting-start">
            <h2>Start Here</h2>
            <p>Consistency beats intensity. Media or comfort fasting counts‚Äîchoose a path you can finish with integrity.</p>
            <div class="fasting-start-grid">
                <div class="fasting-card">
                    <h3>7 Days (Starter)</h3>
                    <ul>
                        <li><strong>Best for:</strong> First-time fasting or reset week</li>
                        <li><strong>Recommended fast type:</strong> Media Fast or Partial Fast</li>
                        <li><strong>Daily time commitment:</strong> 10‚Äì20 minutes</li>
                    </ul>
                    <div class="fasting-cta-row">
                        <a class="fasting-button" href="#fasting-types">See Fast Types</a>
                        <a class="fasting-button secondary" href="#fasting-prep">Prep Checklist</a>
                    </div>
                </div>
                <div class="fasting-card">
                    <h3>21 Days (Growth)</h3>
                    <ul>
                        <li><strong>Best for:</strong> Building rhythm and focus</li>
                        <li><strong>Recommended fast type:</strong> Partial Fast + Media Fast</li>
                        <li><strong>Daily time commitment:</strong> 15‚Äì25 minutes</li>
                    </ul>
                    <div class="fasting-cta-row">
                        <a class="fasting-button" href="#fasting-types">See Fast Types</a>
                        <a class="fasting-button secondary" href="#fasting-prep">Prep Checklist</a>
                    </div>
                </div>
                <div class="fasting-card">
                    <h3>40 Days (Full Journey)</h3>
                    <ul>
                        <li><strong>Best for:</strong> Deep reset and focused intercession</li>
                        <li><strong>Recommended fast type:</strong> Daniel Fast or Combination</li>
                        <li><strong>Daily time commitment:</strong> 20‚Äì30 minutes</li>
                    </ul>
                    <div class="fasting-cta-row">
                        <a class="fasting-button" href="#fasting-types">See Fast Types</a>
                        <a class="fasting-button secondary" href="#fasting-prep">Prep Checklist</a>
                    </div>
                </div>
            </div>
        </section>

        <section class="fasting-section" id="fasting-why">
            <h2>Why Fast?</h2>
            <p>Fasting is not punishment or crash dieting. It is a holy reset that reorders our hunger toward God.</p>
            <p>We lay aside comfort to remember the true source of life. In that empty space, prayer grows deeper and distractions grow quieter.</p>
            <p>Fasting trains the will to follow the Spirit, not the craving of the moment.</p>
            <ul>
                <li>Clears spiritual noise</li>
                <li>Trains self-control and obedience</li>
                <li>Creates space to hear God</li>
                <li>Weakens distractions, strengthens devotion</li>
            </ul>
            <div class="scripture-block">
                <p>‚ÄúReturn to Me with all your heart, with fasting‚Ä¶‚Äù</p>
                <span class="scripture-ref">Joel 2:12</span>
            </div>
        </section>

        <section class="fasting-section" id="fasting-jesus">
            <h2>Jesus in the Wilderness</h2>
            <p>Led by the Spirit, Jesus entered the wilderness. The silence was long, the hunger real. At His weakest moment, temptation pressed in, offering shortcuts and self-protection.</p>
            <p>Instead of reacting from impulse, Jesus answered with Scripture. He chose dependence over proving Himself, trust over urgency.</p>
            <p>Victory often follows obedience. The wilderness sharpened His devotion before His public ministry even began.</p>
            <div class="scripture-block">
                <p>Matthew 4:1‚Äì2</p>
                <span class="scripture-ref">Scripture reference</span>
            </div>
        </section>

        <section class="fasting-section" id="fasting-types">
            <h2>How to Fast for 40 Days</h2>
            <p>Ask God to lead you. Consistency beats extremity. Choose a pace you can keep with integrity.</p>
            <div class="fasting-grid two-col">
                <div class="fasting-card">
                    <h3>Daniel Fast</h3>
                    <p>Whole foods‚Äîfruits, vegetables, legumes, water. Simplicity that keeps focus on prayer.</p>
                </div>
                <div class="fasting-card">
                    <h3>Partial Fast</h3>
                    <p>Skip one meal or limit eating to a set window each day. Let the pause turn into prayer.</p>
                </div>
                <div class="fasting-card">
                    <h3>Media Fast</h3>
                    <p>Set aside social media, entertainment, and streaming. Create space for listening and stillness.</p>
                </div>
                <div class="fasting-card">
                    <h3>Combination Fast</h3>
                    <p>Pair a food fast with a media fast for stronger focus and fewer distractions.</p>
                </div>
            </div>
            <div class="fasting-mini-checklist">
                <strong>Choose Your Commitment</strong>
                <ul>
                    <li>What am I fasting from?</li>
                    <li>Why am I fasting?</li>
                    <li>When will I pray instead?</li>
                    <li>Who will keep me accountable?</li>
                </ul>
            </div>
        </section>

        <section class="fasting-section fasting-prep" id="fasting-prep">
            <h2>Prepare Before Day 1</h2>
            <ul class="prep-checklist">
                <li><label><input type="checkbox"> Pick the fast type and rules</label></li>
                <li><label><input type="checkbox"> Pick a daily prayer time and place</label></li>
                <li><label><input type="checkbox"> Remove triggers (apps/snacks/late-night scrolling)</label></li>
                <li><label><input type="checkbox"> Write your ‚Äúwhy‚Äù in one sentence</label></li>
                <li><label><input type="checkbox"> Tell one trusted person for accountability</label></li>
                <li><label><input type="checkbox"> Plan simple meals (if Daniel/Partial)</label></li>
            </ul>            <!-- Accessibility: Explicit label for form textarea -->            <div class="prep-note">
                <label for="fasting-my-why">My Why (one sentence)</label>
                <textarea id="fasting-my-why" name="fasting-my-why" rows="3" placeholder="Example: To seek God‚Äôs direction for my family."></textarea>
            </div>
        </section>

        <section class="fasting-section" id="fasting-plan">
            <h2>A Simple Daily Rhythm</h2>
            <div class="fasting-plan-grid">
                <div class="fasting-card">
                    <h3>Morning (10‚Äì20 min)</h3>
                    <ul>
                        <li>Scripture reading</li>
                        <li>Short prayer of surrender</li>
                        <li>One specific request</li>
                    </ul>
                </div>
                <div class="fasting-card">
                    <h3>Midday (2‚Äì5 min)</h3>
                    <ul>
                        <li>Pause + breathing prayer</li>
                        <li>Repeat a verse</li>
                        <li>Ask for strength in temptation</li>
                    </ul>
                </div>
                <div class="fasting-card">
                    <h3>Evening (10‚Äì15 min)</h3>
                    <ul>
                        <li>Gratitude list</li>
                        <li>Honest reflection</li>
                        <li>Journal: ‚ÄúWhat did I crave today, and what did God reveal?‚Äù</li>
                    </ul>
                </div>
            </div>
            <div class="scripture-block">
                <p>‚ÄúBe still, and know that I am God.‚Äù</p>
                <span class="scripture-ref">Psalm 46:10</span>
            </div>
        </section>

        <section class="fasting-section" id="fasting-themes">
            <h2>Weekly Themes (A 5-Part Journey)</h2>
            <div class="fasting-themes-grid">
                <div class="fasting-card">
                    <h3>Week 1 ‚Äî Surrender</h3>
                    <p><strong>Scripture:</strong> Romans 12:1</p>
                    <ul>
                        <li>Offer today‚Äôs hunger as worship.</li>
                        <li>Pray, ‚ÄúHere I am. Lead me.‚Äù</li>
                        <li>Release one area of control.</li>
                    </ul>
                    <p><strong>Action:</strong> Write one thing you will not take back this week.</p>
                </div>
                <div class="fasting-card">
                    <h3>Week 2 ‚Äî Repentance &amp; Cleansing</h3>
                    <p><strong>Scripture:</strong> 1 John 1:9</p>
                    <ul>
                        <li>Confess quickly, without excuses.</li>
                        <li>Ask God to reveal hidden motives.</li>
                        <li>Pray for a clean heart and steady spirit.</li>
                    </ul>
                    <p><strong>Action:</strong> Make one reconciliation call or message.</p>
                </div>
                <div class="fasting-card">
                    <h3>Week 3 ‚Äî Renewal of Mind</h3>
                    <p><strong>Scripture:</strong> Romans 12:2</p>
                    <ul>
                        <li>Replace negative loops with truth.</li>
                        <li>Memorize one verse that counters fear.</li>
                        <li>Ask God to renew desires, not just habits.</li>
                    </ul>
                    <p><strong>Action:</strong> Swap 15 minutes of scrolling for Scripture meditation.</p>
                </div>
                <div class="fasting-card">
                    <h3>Week 4 ‚Äî Warfare &amp; Temptation</h3>
                    <p><strong>Scripture:</strong> Ephesians 6:10‚Äì11</p>
                    <ul>
                        <li>Pray on the armor of God daily.</li>
                        <li>Answer temptation with Scripture.</li>
                        <li>Invite a friend to pray when cravings peak.</li>
                    </ul>
                    <p><strong>Action:</strong> Set one ‚Äúcall a friend before quit‚Äù rule.</p>
                </div>
                <div class="fasting-card">
                    <h3>Week 5 ‚Äî Mission &amp; Purpose</h3>
                    <p><strong>Scripture:</strong> Matthew 28:19‚Äì20</p>
                    <ul>
                        <li>Ask how your gifts serve others.</li>
                        <li>Pray for one person to encourage or invite.</li>
                        <li>Listen for next-step assignment.</li>
                    </ul>
                    <p><strong>Action:</strong> Schedule one act of service or invitation.</p>
                </div>
            </div>
        </section>

        <section class="fasting-section" id="fasting-wisdom">
            <h2>Wisdom and Health (Read This)</h2>
            <ul>
                <li>Hydrate and rest.</li>
                <li>Start gradually if you are new to fasting.</li>
                <li>If you have medical conditions, are pregnant, have a history of eating disorders, or take medications: consult a healthcare professional before fasting from food.</li>
                <li>You can fast media, sweets, or comforts if food fasting is unsafe.</li>
            </ul>
            <p class="fasting-note">God is honored by obedience, not self-harm.</p>
        </section>

        <section class="fasting-section" id="fasting-expect">
            <h2>What You May Experience</h2>
            <div class="fasting-grid two-col">
                <div class="fasting-card">
                    <h3>Challenges</h3>
                    <ul>
                        <li>Hunger and irritability</li>
                        <li>Cravings and emotional surfacing</li>
                        <li>Moments of resistance or distraction</li>
                    </ul>
                </div>
                <div class="fasting-card">
                    <h3>Growth</h3>
                    <ul>
                        <li>Clarity and peace</li>
                        <li>Deepened prayer</li>
                        <li>Freedom from compulsions</li>
                        <li>Renewed conviction</li>
                    </ul>
                </div>
            </div>
            <div class="scripture-block">
                <p>‚ÄúDraw near to God, and He will draw near to you.‚Äù</p>
                <span class="scripture-ref">James 4:8</span>
            </div>
        </section>

        <section class="fasting-section" id="fasting-fail">
            <h2>What If I Fail?</h2>
            <p>Don‚Äôt spiral. Reset at the next meal or next morning. Confess quickly, receive grace, and keep going. Ask your accountability partner to pray with you.</p>
            <div class="scripture-block">
                <p>Reset Prayer: ‚ÄúFather, I stumbled. Thank You for grace. Steady my heart, lift my eyes, and lead me forward.‚Äù</p>
                <span class="scripture-ref">Grace covers the journey.</span>
            </div>
        </section>

        <section class="fasting-section fasting-tracker" id="fasting-tracker">
            <div class="tracker-container">
                <h2>40-Day Tracker</h2>
                <p class="tracker-instructions">Tap a day to mark it complete. Your progress is saved on this device. Future days unlock daily starting January 1, 2026.</p>

                <!-- Accessibility: aria-live announcements for dynamic content updates -->
                <div class="tracker-encouragement" aria-live="polite">
                    <p class="encouragement-kicker" id="encourageKicker">Today's Encouragement</p>
                    <p class="encouragement-text" id="encourageText"></p>
                    <p class="encouragement-ref" id="encourageRef"></p>
                </div>

                <div class="tracker-progress" aria-live="polite">
                    <span id="trackerCompletedText">Completed 0 / 40</span>
                    <span class="tracker-unlocked" id="trackerUnlockedText">Unlocked 0 / 40</span>
                </div>

                <!-- Accessibility: Grid role for semantic structure, descriptive ARIA labels added via JavaScript -->
                <div id="trackerGrid" class="tracker-grid" role="grid" aria-label="40 day fasting tracker"></div>

                <!-- Milestone banner for claim codes -->
                <div id="milestoneBanner" class="milestone-banner" hidden aria-live="polite" aria-atomic="true"></div>

                <div class="tracker-actions">
                    <button id="trackerResetBtn" type="button" class="fasting-button secondary reset-btn">Reset Tracker</button>
                </div>
            </div>
        </section>

        <section class="fasting-section" id="fasting-prayer">
            <h2>A Closing Prayer</h2>
            <p class="fasting-prayer">Lord, I offer You my hunger as worship.
Strip away what distracts me.
Strengthen what draws me closer to You.
Teach me to hunger for righteousness.
Give me grace for the next step. Amen.</p>
            <div class="fasting-cta-row">
                <a class="fasting-button" href="index.html#contact">Need Prayer or Support?</a>
            </div>
            <p class="fasting-note">If you‚Äôre fasting for purity, clarity, or freedom‚Äîdon‚Äôt do it alone.</p>
        </section>
    </main>

    <footer role="contentinfo" class="footFooter" id="contact">
        <h2 class="contact-heading"><span class="heading-icon">‚úâ</span>Contact Yegor<span class="heading-underline"></span></h2>
        <div class="socialMedia">
            <a  href="https://www.facebook.com/hambaryanyegor/" target="_blank" aria-label="Visit Yegor Creative on Facebook"><img class="socialMI" src="Assets/facebook.png" alt="" width="90px"></a>
            <a  href="https://www.instagram.com/yegorcreative/" target="_blank" aria-label="Visit Yegor Creative on Instagram"><img class="socialMI" src="Assets/instagram.png" alt="" width="90px"></a>
            <a  href="https://www.youtube.com/yegorcreative" target="_blank" aria-label="Visit Yegor Creative on YouTube"><img class="socialMI" src="Assets/youtube.png" alt="" width="90px"></a>
            <a  href="https://www.linkedin.com/in/yegorhambaryan/" target="_blank" aria-label="Visit Yegor Hambaryan on LinkedIn"><img class="socialMI" src="Assets/linkedIn.png" alt="" width="90px"></a>
            <a  href="https://github.com/YegorCreative" target="_blank" aria-label="Visit Yegor Creative on GitHub"><img class="socialMI" src="Assets/github.png" alt="" width="90px"></a>
            <a  href="mailto:aleqsandregor@gmail.com" aria-label="Send email to Yegor"><img src="Assets/email.png" alt="" class="socialMI" width="90px"></a>
        </div>
        <div class="accomplish">
        <div class="badG">Badges from Google</div>
        <div class="badgeSchool">
            <div class="plusI"><img src="Assets/b1.svg" alt="Android Studio User by Google" width="90px">Android Studio User by Google</div>
            <div class="plusI"><img src="Assets/b2.png" alt="Attendee I/O by Google" width="90px">Attendee I/O 2020-2021 by Google</div>
            <div class="plusI"><img src="Assets/b3.svg" alt="2021 Solution Challenge registrant by Google" width="90px">2021 Solution Challenge registrant by Google</div>
            <div class="plusI"><img src="Assets/b4.svg" alt="Google Developer Profile Beta User" width="90px">Google Developer Profile Beta User</div>
            <div class="plusI"><img src="Assets/b5.svg" alt="Created Google Developer Profile" width="90px">Created Google Developer Profile</div>
        </div>
    </div>
    </footer>
    <div class="lastQuote">Business is complicated, your web solutions can be  simple. @YegorCreative2021</div>
    <script>
    (function() {
        const trackerEl = document.querySelector('#fasting-tracker');
        if (!trackerEl) return;

        const PROGRESS_KEY = 'fasting40_progress';
        const WHY_KEY = 'fasting40_mywhy';
        const START_DATE = new Date(2026, 0, 1);
        const MILESTONE_DATES_KEY = 'fasting40_milestoneDates';
        const SHOWN_MILESTONES_KEY = 'fasting40_shownMilestones';
        const CLAIM_SECRET = 'YEGORCREATIVE_FASTING_2026';
        const MILESTONES = [5, 10, 15, 20, 25, 30, 35, 40];
        const grid = document.getElementById('trackerGrid');
        const completedText = document.getElementById('trackerCompletedText');
        const unlockedText = document.getElementById('trackerUnlockedText');
        const resetBtn = document.getElementById('trackerResetBtn');
        const whyField = document.getElementById('fasting-my-why');
        const encourageKicker = document.getElementById('encourageKicker');
        const encourageText = document.getElementById('encourageText');
        const encourageRef = document.getElementById('encourageRef');

        const dateFmt = new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric', year:'numeric' });

        const themes = [
            { name: 'Surrender', ref: 'Romans 12:1', snippet: 'Offer your life as a living sacrifice.', encouragement: 'Today, surrender what you keep controlling-offer it to God again.' },
            { name: 'Repentance & Cleansing', ref: '1 John 1:9', snippet: 'He is faithful to forgive and cleanse.', encouragement: 'Bring what\'s hidden into the light; receive mercy and keep walking.' },
            { name: 'Renewal of Mind', ref: 'Romans 12:2', snippet: 'Be transformed by renewing your mind.', encouragement: 'Replace the craving with truth; let God reshape your thinking.' },
            { name: 'Warfare & Temptation', ref: 'Ephesians 6:10-11', snippet: 'Be strong... put on the armor of God.', encouragement: 'Don\'t negotiate with temptation-stand, pray, and move forward.' },
            { name: 'Mission & Purpose', ref: 'Matthew 28:19-20', snippet: 'Go and make disciples.', encouragement: 'Your fast is forming you for impact-carry what God is building into your life.' }
        ];

        // FNV-1a hash function for deterministic claim codes
        function fnv1a(str) {
            let hash = 2166136261; // 32-bit offset basis
            for (let i = 0; i < str.length; i++) {
                hash ^= str.charCodeAt(i);
                hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);
                hash = hash >>> 0; // Keep 32-bit unsigned
            }
            return Math.abs(hash).toString(36).toUpperCase().slice(0, 6);
        }

        // Generate claim code for a milestone
        function generateClaimCode(milestone, dateStr) {
            const hashInput = `${milestone}|${dateStr}|${CLAIM_SECRET}`;
            const hash = fnv1a(hashInput);
            return `FAST-${milestone}-${dateStr}-${hash}`;
        }

        // Get today's date in YYYYMMDD format (local time)
        function getTodayString() {
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            return `${year}${month}${day}`;
        }

        // Load milestone dates from localStorage
        function loadMilestoneDates() {
            try {
                return JSON.parse(localStorage.getItem(MILESTONE_DATES_KEY)) || {};
            } catch (e) {
                return {};
            }
        }

        // Save milestone dates to localStorage
        function saveMilestoneDates(dates) {
            localStorage.setItem(MILESTONE_DATES_KEY, JSON.stringify(dates));
        }

        // Load shown milestones from localStorage
        function loadShownMilestones() {
            try {
                const shown = JSON.parse(localStorage.getItem(SHOWN_MILESTONES_KEY)) || [];
                return Array.isArray(shown) ? shown : [];
            } catch (e) {
                return [];
            }
        }

        // Save shown milestones to localStorage
        function saveShownMilestones(shown) {
            localStorage.setItem(SHOWN_MILESTONES_KEY, JSON.stringify(shown));
        }

        // Show milestone banner
        function showMilestoneBanner(milestone, claimCode) {
            const banner = document.getElementById('milestoneBanner');
            if (!banner) return;

            const html = `
                <h3>üéâ Milestone Unlocked: ${milestone} Days</h3>
                <p>You've completed <strong>${milestone} days</strong> of prayer and fasting. Great work!</p>
                <p style="font-weight: 600; margin: 10px 0;">Your Claim Code:</p>
                <div class="code-row">
                    <input type="text" class="claim-code-input" value="${claimCode}" readonly aria-label="Your claim code"/>
                    <button type="button" class="copy-code-btn" aria-label="Copy claim code">Copy</button>
                </div>
                <a href="badges.html?code=${encodeURIComponent(claimCode)}" class="btn fasting-button" style="margin-top: 10px; display: inline-block;">Claim Your Badge</a>
            `;
            banner.innerHTML = html;
            banner.hidden = false;

            // Copy button functionality
            const copyBtn = banner.querySelector('.copy-code-btn');
            if (copyBtn) {
                copyBtn.addEventListener('click', () => {
                    const input = banner.querySelector('.claim-code-input');
                    if (input) {
                        input.select();
                        document.execCommand('copy');
                        const originalText = copyBtn.textContent;
                        copyBtn.textContent = 'Copied!';
                        setTimeout(() => {
                            copyBtn.textContent = originalText;
                        }, 2000);
                    }
                });
            }
        }

        // Check for new milestones and show banner if earned
        function checkAndShowMilestone(completedCount, milestoneDates, shownMilestones) {
            const earnedMilestones = MILESTONES.filter(m => completedCount >= m);
            for (const milestone of earnedMilestones) {
                if (!shownMilestones.includes(milestone)) {
                    // First time showing this milestone
                    let dateStr = milestoneDates[milestone];
                    if (!dateStr) {
                        // Milestone newly earned today
                        dateStr = getTodayString();
                        milestoneDates[milestone] = dateStr;
                        saveMilestoneDates(milestoneDates);
                    }
                    const claimCode = generateClaimCode(milestone, dateStr);
                    showMilestoneBanner(milestone, claimCode);
                    shownMilestones.push(milestone);
                    saveShownMilestones(shownMilestones);
                    return; // Show only the latest milestone at a time
                }
            }
        }

        function toLocalMidnight(date) {
            return new Date(date.getFullYear(), date.getMonth(), date.getDate());
        }

        function loadProgress() {
            try {
                const stored = JSON.parse(localStorage.getItem(PROGRESS_KEY));
                if (Array.isArray(stored) && stored.length === 40) {
                    return stored.map(Boolean);
                }
            } catch (e) {}
            return new Array(40).fill(false);
        }

        let progress = loadProgress();

        function saveProgress() {
            localStorage.setItem(PROGRESS_KEY, JSON.stringify(progress));
            // Check for milestones after saving
            const completedCount = progress.filter(Boolean).length;
            const milestoneDates = loadMilestoneDates();
            const shownMilestones = loadShownMilestones();
            checkAndShowMilestone(completedCount, milestoneDates, shownMilestones);
        }

        function getActiveCount() {
            const today = toLocalMidnight(new Date());
            const start = toLocalMidnight(START_DATE);
            const diffDays = Math.floor((today - start) / 86400000);
            return Math.max(0, Math.min(40, diffDays + 1));
        }

        function updateProgressText(activeCount) {
            const completed = progress.filter(Boolean).length;
            if (completedText) completedText.textContent = `Completed ${completed} / 40`;
            if (unlockedText) unlockedText.textContent = `Unlocked ${activeCount} / 40`;
        }

        function updateEncouragement(activeCount) {
            if (!encourageKicker || !encourageText || !encourageRef) return;
            const currentDay = activeCount;
            if (currentDay === 0) {
                encourageKicker.textContent = 'Preparing for Day 1 (Starts Jan 1, 2026)';
                encourageText.textContent = 'Use this time to clarify your "why," prepare your heart, and set your commitment.';
                encourageRef.textContent = '';
                return;
            }
            const weekIndex = Math.min(4, Math.max(0, Math.ceil(currentDay / 8) - 1));
            const theme = themes[weekIndex];
            const weekNum = weekIndex + 1;
            encourageKicker.textContent = `Day ${currentDay} Encouragement ‚Äî Week ${weekNum}: ${theme.name}`;
            encourageText.textContent = `"${theme.snippet}" ${theme.encouragement}`;
            encourageRef.textContent = theme.ref;
        }

        function renderAll() {
            if (!grid) return;
            const activeCount = getActiveCount();
            const todayMidnight = toLocalMidnight(new Date());
            grid.innerHTML = '';
            
            /* Accessibility: Build tracker with keyboard navigation and screen reader support */
            for (let i = 0; i < 40; i++) {
                const dayNumber = i + 1;
                const unlockDate = new Date(START_DATE);
                unlockDate.setDate(unlockDate.getDate() + i);
                const isActive = dayNumber <= activeCount;
                const isToday = isActive && unlockDate.getTime() === todayMidnight.getTime();
                const isDone = !!progress[i];
                const status = isDone ? 'completed' : isActive ? 'available' : 'locked';

                const btn = document.createElement('button');
                btn.type = 'button';
                btn.dataset.day = dayNumber;
                let classes = 'tracker-day';
                if (!isActive) classes += ' day-locked';
                else classes += ' day-active';
                if (isToday) classes += ' day-today';
                if (isDone) classes += ' day-done';
                btn.className = classes;
                btn.setAttribute('role', 'gridcell');
                
                /* Accessibility: Enhanced ARIA labels for screen readers */
                let ariaLabel = `Day ${dayNumber}`;
                if (isToday) ariaLabel += ', today';
                if (isDone) ariaLabel += ', completed';
                else if (isActive) ariaLabel += ', available';
                else ariaLabel += `, locked until ${dateFmt.format(unlockDate)}`;
                btn.setAttribute('aria-label', ariaLabel);
                btn.setAttribute('aria-pressed', isDone ? 'true' : 'false');
                btn.disabled = !isActive;

                const dayLabel = document.createElement('div');
                dayLabel.textContent = `Day ${dayNumber}`;
                btn.appendChild(dayLabel);

                const statusTag = document.createElement('span');
                statusTag.className = 'tracker-status';
                statusTag.setAttribute('aria-hidden', 'true');
                if (isToday) {
                    statusTag.textContent = 'Today';
                } else if (isDone) {
                    statusTag.textContent = 'Done';
                } else if (isActive) {
                    statusTag.textContent = 'Available';
                } else {
                    statusTag.textContent = 'Locked';
                }
                btn.appendChild(statusTag);

                if (!isActive) {
                    const dateTag = document.createElement('span');
                    dateTag.className = 'day-date';
                    dateTag.setAttribute('aria-hidden', 'true');
                    dateTag.textContent = `Unlocks on ${dateFmt.format(unlockDate)}`;
                    btn.appendChild(dateTag);
                }

                if (isActive) {
                    btn.addEventListener('click', () => {
                        progress[i] = !progress[i];
                        saveProgress();
                        renderAll();
                    });
                }

                grid.appendChild(btn);
            }
            updateProgressText(activeCount);
            updateEncouragement(activeCount);
        }

        function scheduleMidnightRefresh() {
            const now = new Date();
            const nextMidnight = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);
            const delay = nextMidnight - now + 250;
            setTimeout(() => {
                renderAll();
                scheduleMidnightRefresh();
            }, delay);
        }

        renderAll();
        scheduleMidnightRefresh();

        if (resetBtn) {
            resetBtn.addEventListener('click', () => {
                if (confirm('Reset your 40-day tracker? This will clear completion marks on this device.')) {
                    progress = new Array(40).fill(false);
                    saveProgress();
                    renderAll();
                }
            });
        }

        if (whyField) {
            const savedWhy = localStorage.getItem(WHY_KEY);
            if (savedWhy) whyField.value = savedWhy;
            whyField.addEventListener('input', () => {
                localStorage.setItem(WHY_KEY, whyField.value);
            });
        }
    })();
    </script>
    
    <!-- Back to top button -->
    <button type="button" id="backToTopBtn" class="back-to-top" aria-label="Back to top">
      ‚Üë Top
    </button>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5945108334593216"
     crossorigin="anonymous"></script>
    <script src="script.js"></script>
</body>
</html>
